# PentesterLab

If `mysql` account has a valid shell instead of /bin/false.
This should allow you to log in as the system user mysql.

Once you're logged in, you can get access to the Mysql root password by running strings on the following file: /var/lib/mysql/mysql/user.MYD.


You should get 2 passwords:

debian-sys-maint
root

The root password is likely split into two parts:

```
localhost
root*8246FACFAA5BB9CFDCDEAEDA
6c732c6044b7
root
    127.0.0.1
root
root
    localhost
debian-sys-maint*7B6D59ECDB7B791CF100CA46D0AD911082112351
15DA4067EAA55FBC
The first part is *8246FACFAA5BB9CFDCDEAEDA and the second part is 15DA4067EAA55FBC (the value should be different on the live instance).
```

Once you put them together, you should get a file containing:

`root:*8246FACFAA5BB9CFDCDEAEDA15DA4067EAA55FBC`

You should then be able to crack the password using john (you will need the jumbo patch version of John). You don't have to specify the format as john will detect it automatically. But if you get the message "No password hashes loaded", try to run john --format=mysql-sha1 [yourfile] to see if you have the right version of john. If you get an error message, make sure you install the jumbo release version of John.

Once you gain access, you can read files from the file system using:

```
# CREATE TABLE demo(t text);
# COPY demo from '[FILENAME]';
# SELECT * FROM demo;
```

Where [FILENAME] is the filename.


change the Accept: encoding header\
code is generated automatically and access to different formats (HTML, JSON) for the same database record, is also done automatically.

